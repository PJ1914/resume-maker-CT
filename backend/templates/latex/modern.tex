%!TEX TS-program = xelatex
%!TEX encoding = UTF-8 Unicode
% Modern Resume Template - Clean, ATS-friendly design with visual hierarchy
\documentclass[11pt,letterpaper]{article}

% Packages
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\usepackage{titlesec}
\usepackage{enumitem}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{fontspec}

% Page setup
\geometry{letterpaper,margin=0.6in,top=0.5in,bottom=0.5in}
\pagestyle{empty}
\setlength{\parindent}{0pt}
\setlength{\parskip}{0pt}

% Colors
\definecolor{primarycolor}{RGB}{0,102,204}
\definecolor{textcolor}{RGB}{51,51,51}
\definecolor{sectioncolor}{RGB}{0,102,204}

% Hyperlink setup
\hypersetup{
    colorlinks=true,
    linkcolor=primarycolor,
    urlcolor=primarycolor,
    pdfborder={0 0 0}
}

% Custom section formatting
\titleformat{\section}
  {\large\bfseries\color{sectioncolor}}
  {}
  {0em}
  {}
  [\titlerule]
\titlespacing*{\section}{0pt}{12pt}{6pt}

% Custom subsection (for job titles)
\titleformat{\subsection}
  {\bfseries}
  {}
  {0em}
  {}
\titlespacing*{\subsection}{0pt}{8pt}{2pt}

% List formatting
\setlist[itemize]{leftmargin=*,label=\textbullet,itemsep=2pt,parsep=0pt,topsep=2pt}

% Custom commands
\newcommand{\name}[1]{
  {\Huge\bfseries\color{textcolor} #1}
  \vspace{4pt}
}

\newcommand{\contact}[1]{
  {\normalsize #1}
  \vspace{8pt}
}

\newcommand{\experience}[5]{
  \subsection{#1 \hfill {\normalfont\itshape #2}}
  {\itshape #3} \hfill {\itshape #4}
  \vspace{2pt}
  
  #5
  \vspace{6pt}
}

\newcommand{\education}[5]{
  \subsection{#1 \hfill {\normalfont\itshape #2}}
  {\itshape #3} \hfill {\itshape #4}
  
  {#5}
  \vspace{6pt}
}

\newcommand{\project}[4]{
  \subsection{#1 \hfill {\normalfont\itshape #2}}
  {\itshape Technologies: #3}
  \vspace{2pt}
  
  #4
  \vspace{6pt}
}

\begin{document}

% Header
\begin{center}
  \name{ {{- full_name -}} }
  
  \contact{
    {% if email %}{{ email }}{% endif %}
    {% if phone and email %} $\cdot$ {% endif %}
    {% if phone %}{{ phone }}{% endif %}
    {% if location and (email or phone) %} $\cdot$ {% endif %}
    {% if location %}{{ location }}{% endif %}
    {% if linkedin %} $\cdot$ \href{ {{- linkedin -}} }{\underline{LinkedIn}}{% endif %}
    {% if github %} $\cdot$ \href{ {{- github -}} }{\underline{GitHub}}{% endif %}
    {% if portfolio %} $\cdot$ \href{ {{- portfolio -}} }{\underline{Portfolio}}{% endif %}
  }
\end{center}

% Summary
{% if summary %}
\section{Professional Summary}
{{ summary }}
\vspace{4pt}
{% endif %}

% Experience
{% if experience %}
\section{Experience}
{% for exp in experience %}
\experience{ {{- exp.position -}} }{ {{- exp.start_date -}} {% if exp.current %}-- Present{% else %}-- {{ exp.end_date }}{% endif %}}{ {{- exp.company -}} }{ {{- exp.location -}} }{
  {% if exp.highlights %}
  \begin{itemize}
    {% for highlight in exp.highlights %}
    \item {{ highlight }}
    {% endfor %}
  \end{itemize}
  {% endif %}
}
{% endfor %}
{% endif %}

% Education
{% if education %}
\section{Education}
{% for edu in education %}
\education{ {{- edu.degree -}} {% if edu.field %}in {{ edu.field }}{% endif %}}{ {{- edu.start_date -}} -- {{ edu.end_date }}}{ {{- edu.institution -}} }{ {{- edu.location -}} }{
  {% if edu.gpa or edu.honors %}
  {% if edu.gpa %}GPA: {{ edu.gpa }}{% endif %}
  {% if edu.gpa and edu.honors %} $\cdot$ {% endif %}
  {% if edu.honors %}{{ edu.honors }}{% endif %}
  {% endif %}
}
{% endfor %}
{% endif %}

% Projects
{% if projects %}
\section{Projects}
{% for proj in projects %}
\project{ {{- proj.name -}} }{% if proj.link %}{ \href{ {{- proj.link -}} }{\underline{Link}}}{% else %}{}{% endif %}{ {{- proj.technologies|join(', ') -}} }{
  {% if proj.description %}{{ proj.description }}{% endif %}
  {% if proj.highlights %}
  \begin{itemize}
    {% for highlight in proj.highlights %}
    \item {{ highlight }}
    {% endfor %}
  \end{itemize}
  {% endif %}
}
{% endfor %}
{% endif %}

% Skills
{% if skills %}
\section{Skills}
{% for skill in skills %}
\textbf{ {{- skill.category -}} :} {{ skill.items|join(', ') }}

{% endfor %}
{% endif %}

\end{document}
